language: dart
dart:
  - "stable"
cache:
  directories:
    - $HOME/.pub_cache/

stages:
  - test
  - deploy

jobs:
  include:
    - stage: "Testing"
      name: "Unit Tests"
      before_script:
        - "pub get"
      script:
        - "pub run test --platform chrome"
    - stage: "Coverage"
      name: "Report Code Coverage"
      before_script:
        - "pub get"
      script:
        - "pub run test --platform chrome"
    - stage: "Tests" # naming the Tests stage
      name: "Unit Tests" # names the first Tests stage job
      script: ./unit-tests
# Fix deploy once Dart is done
# before_deploy:
#   - "cd functions && npm install && cd .."

# deploy:
#   provider: firebase
#   skip_cleanup: true
#   on:
#     branch: "master"
